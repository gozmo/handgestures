{% extends "models/base.html" %} 

{% block inner_content %}
<form action="results" target="select" method="post">
    <p>Training Run</p>
    <select name="training_run_id">
        {% for training_run_id in training_run_ids %}
            {% if training_run_id == selected_training_run_id %}
                <option value ={{training_run_id}} selected> {{training_run_id}} </option>
            {% else %}
                <option value ={{training_run_id}}> {{training_run_id}} </option>
            {% endif %}
        {% endfor %}
    </select> 
    <p><input type="submit" value="Choose"></p>
</form>

<b> Parameters <b>
<table>
{% for parameter_name, parameter_value in parameters.items() %}
    <tr>
        <td>{{parameter_name}}</td>
        <td>{{parameter_value}}</td>
    </tr>
{% endfor %}
</table>

<b> Dataset stats </b>

<table>
    {% for label, size in dataset_stats["label_statistics"].items() %}
        <tr>
            <td> {{label}} </td>
            <td> {{size}} </td>
        </tr>
    {% endfor %}
    <tr>
        <td> Dataset Size </td>
        <td> {{dataset_stats["dataset_size"]}} </td>
    </tr>
</table>

<b> Confusion Matrix <b>

<table>
    <tr>
        <th colspan=100%>Predicted label</th>

    </tr>
    <tr>
        <th> </th>
        {% for label  in label_order %}
            <th> {{label}} </th>
        {% endfor %}
    </tr>

    {% for row_label in label_order %}
        <tr>
           <td> {{row_label}}
        {% for column_label in label_order  %}
            <td> {{confusion_matrix[row_label][column_label]}} </td>
        {% endfor %}
        </tr>
    {% endfor %}
</table>


<b> Loss </b>
<a href={{url_for('evaluation', training_run_id=training_run_id, filename='loss.jpg')}}>
    <img src={{url_for('evaluation', training_run_id=training_run_id, filename='loss.jpg')}}>
</a>

<b> Prediction Distribution</b>
<a href={{url_for('evaluation', training_run_id=training_run_id, filename='prediction_distribution.jpg')}}>
    <img src={{url_for('evaluation', training_run_id=training_run_id, filename='prediction_distribution.jpg')}}>
</a>

{% endblock %}
